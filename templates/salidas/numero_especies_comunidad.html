{% extends "base.html" %}
{% load humanize %}

{% block content %}


<div class="menu-dashboard">
    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-12 col-sm-8 col-md-6 col-lg-6">
                <div class="salida-title">
                    <h4>Especies promedio por comunidad</h4>
                    <ol class="breadcrumb">
                        <li><a href="/">Inicio</a></li>
                        <li><a href="/filtros/">Explorar datos</a></li>
                        <li class="active">Especies promedio por comunidad</li>
                    </ol>
                </div>

            </div>
            <div class="col-xs-12 col-sm-4 col-md-6 col-lg-6">
                <ul class="nav nav-tabs menu-fs pull-right" role="tablist">

                    <li role="presentation" class="active">

                        <a href="#filtro" aria-controls="filtro" role="tab" data-toggle="tab">
                        <div class="f-icon"><i class="fa fa-filter fa-2x"></i></div>
                        <h6>filtro</h6>
                        </a>
                    </li>
                    <li role="presentation">
                        <a href="#indicadores" aria-controls="indicadores" role="tab" data-toggle="tab">
                            <div class="f-icon"><i class="fa fa-bar-chart fa-2x"></i></div>
                            <h6>indicadores</h6>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<div role="tabpanel">

    <!-- Tab panes -->
    <div class="tab-content filtro-indicador">
        <div role="tabpanel" class="tab-pane active" id="filtro">
            {% include "salidas/select_filtros.html" %}
        </div>
        <div role="tabpanel" class="tab-pane" id="indicadores">
            {% include "indicadores.html" %}
        </div>
    </div>
</div>

<div class="consulta" id="consulta">
	<div class="contact_wrap">
		<div class="container">
			<div class="row">
            <div>
            <!-- Nav tabs -->
            <ul class="nav nav-tabs" role="tablist">
            <li role="presentation" class="active"><a href="#cultiva" aria-controls="cultiva" role="tab" data-toggle="tab">Cultivado</a></li>
            <li role="presentation"><a href="#vendido" aria-controls="vendido" role="tab" data-toggle="tab">Vendido</a></li>
            <li role="presentation"><a href="#comprado" aria-controls="comprado" role="tab" data-toggle="tab">Comprado</a></li>
            <li role="presentation"><a href="#consumido" aria-controls="consumido" role="tab" data-toggle="tab">Consumido</a></li>
            </ul>

            <!-- Tab panes -->
            <div class="tab-content">
            <div role="tabpanel" class="tab-pane active" id="cultiva">
              <div class="panel panel-default panel-salidas">
                <div class="panel-heading">
                    <div class="panel-title-box">
                        <h3>Precipitación promedio</h3>
                        <span>Gráfico promedios</span>

                    </div>
                </div>
                <div class="panel-body">
                    <div class="row stacked">
                        <div id="container" width='100%'></div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default panel-salidas">
                <div class="panel-heading">
                    <div class="panel-title-box">
                        <h3>Temperatura promedio</h3>
                        <span>Gráfico promedios</span>

                    </div>
                </div>
                <div class="panel-body">
                    <div class="row stacked">
                        <div id="temp" width='100%'></div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default panel-salidas">
                <div class="panel-heading">
                    <div class="panel-title-box">
                        <h3>Áreas promedio</h3>
                        <span>Gráfico promedios</span>

                    </div>
                </div>
                <div class="panel-body">
                    <div class="row stacked">
                        <div id="area" width='100%'></div>
                    </div>
                </div>
            </div>
            </div>
            <div role="tabpanel" class="tab-pane" id="vendido">
              <div class="panel panel-default panel-salidas">
                <div class="panel-heading">
                    <div class="panel-title-box">
                        <h3>Precipitación promedio</h3>
                        <span>Gráfico promedios</span>

                    </div>
                </div>
                <div class="panel-body">
                    <div class="row stacked">
                        <div id="vendidas" width='100%'></div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default panel-salidas">
                <div class="panel-heading">
                    <div class="panel-title-box">
                        <h3>Temperatura promedio</h3>
                        <span>Gráfico promedios</span>

                    </div>
                </div>
                <div class="panel-body">
                    <div class="row stacked">
                        <div id="temp_sold" width='100%'></div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default panel-salidas">
                <div class="panel-heading">
                    <div class="panel-title-box">
                        <h3>Áreas promedio</h3>
                        <span>Gráfico promedios</span>

                    </div>
                </div>
                <div class="panel-body">
                    <div class="row stacked">
                        <div id="area_sold" width='100%'></div>
                    </div>
                </div>
            </div>
            </div>
            <div role="tabpanel" class="tab-pane" id="comprado">
              <div class="panel panel-default panel-salidas">
                <div class="panel-heading">
                    <div class="panel-title-box">
                        <h3>Precipitación promedio</h3>
                        <span>Gráfico promedios</span>

                    </div>
                </div>
                <div class="panel-body">
                    <div class="row stacked">
                        <div id="compradas" width='100%'></div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default panel-salidas">
                <div class="panel-heading">
                    <div class="panel-title-box">
                        <h3>Temperatura promedio</h3>
                        <span>Gráfico promedios</span>

                    </div>
                </div>
                <div class="panel-body">
                    <div class="row stacked">
                        <div id="temp_purchased" width='100%'></div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default panel-salidas">
                <div class="panel-heading">
                    <div class="panel-title-box">
                        <h3>Áreas promedio</h3>
                        <span>Gráfico promedios</span>

                    </div>
                </div>
                <div class="panel-body">
                    <div class="row stacked">
                        <div id="area_purchased" width='100%'></div>
                    </div>
                </div>
            </div>
            </div>
            <div role="tabpanel" class="tab-pane" id="consumido">
              <div class="panel panel-default panel-salidas">
                <div class="panel-heading">
                    <div class="panel-title-box">
                        <h3>Precipitación promedio</h3>
                        <span>Gráfico promedios</span>

                    </div>
                </div>
                <div class="panel-body">
                    <div class="row stacked">
                        <div id="consumidas" width='100%'></div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default panel-salidas">
                <div class="panel-heading">
                    <div class="panel-title-box">
                        <h3>Temperatura promedio</h3>
                        <span>Gráfico promedios</span>

                    </div>
                </div>
                <div class="panel-body">
                    <div class="row stacked">
                        <div id="temp_consumed" width='100%'></div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default panel-salidas">
                <div class="panel-heading">
                    <div class="panel-title-box">
                        <h3>Áreas0.
                           promedio</h3>
                        <span>Gráfico promedios</span>

                    </div>
                </div>
                <div class="panel-body">
                    <div class="row stacked">
                        <div id="area_consumed" width='100%'></div>
                    </div>
                </div>
            </div>
            </div>
            </div>

            </div>


			</div>
		</div>
	</div>
</div>
{% endblock %}

{% block extra_js %}
<script type="text/javascript">

    $(".drop").click(function(){
        $('.drop').parent().removeClass("active");
        var content = $(this).text();
        $(".dw-s").text(content+" ");
        $(".dw-s").append("<span class='caret'></span>")
    })

</script>
<script type="text/javascript">
$(function () {
  Highcharts.setOptions({
		lang: {
			thousandsSep: ','
		}
	});
    Highcharts.chart('container', {
        chart: {
            type: 'scatter',
            zoomType: 'xy'
        },
        title: {
            text: 'Precipitación vs Especies cultivadas'
        },
        xAxis: {
            title: {
                enabled: true,
                text: 'Precipitación'
            },
            startOnTick: true,
            endOnTick: true,
            showLastLabel: true
        },
        yAxis: {
            title: {
                text: 'Especies'
            }
        },
        plotOptions: {
            scatter: {
                marker: {
                    radius: 7,
                    states: {
                        hover: {
                            enabled: true,
                            lineColor: 'rgb(100,100,100)'
                        }
                    }
                },
                states: {
                    hover: {
                        marker: {
                            enabled: false
                        }
                    }
                },
                tooltip: {
                    headerFormat: '<b>{series.name}</b><br>',
                    pointFormat: '{point.y} especies | {point.x}'
                }
            }
        },
        series: [
          {% for k,v in rainfall.items %}
                {
                  name: '{{k}}',
                  data: [ [{{v.0}}, {{v.1}}],]
              },
          {% endfor %}
            ]
    });

    Highcharts.chart('vendidas', {
        chart: {
            type: 'scatter',
            zoomType: 'xy'
        },
        title: {
            text: 'Precipitación vs Especies vendidas'
        },
        xAxis: {
            title: {
                enabled: true,
                text: 'Precipitación'
            },
            startOnTick: true,
            endOnTick: true,
            showLastLabel: true
        },
        yAxis: {
            title: {
                text: 'Especies'
            }
        },
        plotOptions: {
            scatter: {
                marker: {
                    radius: 7,
                    states: {
                        hover: {
                            enabled: true,
                            lineColor: 'rgb(100,100,100)'
                        }
                    }
                },
                states: {
                    hover: {
                        marker: {
                            enabled: false
                        }
                    }
                },
                tooltip: {
                    headerFormat: '<b>{series.name}</b><br>',
                    pointFormat: '{point.y} especies | {point.x}'
                }
            }
        },
        series: [
          {% for k,v in rainfall_sold.items %}
                {
                  name: '{{k}}',
                  data: [ [{{v.0}}, {{v.1}}],]
              },
          {% endfor %}
            ]
    });

    Highcharts.chart('compradas', {
        chart: {
            type: 'scatter',
            zoomType: 'xy'
        },
        title: {
            text: 'Precipitación vs Especies compradas'
        },
        xAxis: {
            title: {
                enabled: true,
                text: 'Precipitación'
            },
            startOnTick: true,
            endOnTick: true,
            showLastLabel: true
        },
        yAxis: {
            title: {
                text: 'Especies'
            }
        },
        plotOptions: {
            scatter: {
                marker: {
                    radius: 7,
                    states: {
                        hover: {
                            enabled: true,
                            lineColor: 'rgb(100,100,100)'
                        }
                    }
                },
                states: {
                    hover: {
                        marker: {
                            enabled: false
                        }
                    }
                },
                tooltip: {
                    headerFormat: '<b>{series.name}</b><br>',
                    pointFormat: '{point.y} especies | {point.x}'
                }
            }
        },
        series: [
          {% for k,v in rainfall_purchased.items %}
                {
                  name: '{{k}}',
                  data: [ [{{v.0}}, {{v.1}}],]
              },
          {% endfor %}
            ]
    });

    Highcharts.chart('consumidas', {
        chart: {
            type: 'scatter',
            zoomType: 'xy'
        },
        title: {
            text: 'Precipitación vs Especies consumidas'
        },
        xAxis: {
            title: {
                enabled: true,
                text: 'Precipitación'
            },
            startOnTick: true,
            endOnTick: true,
            showLastLabel: true
        },
        yAxis: {
            title: {
                text: 'Especies'
            }
        },
        plotOptions: {
            scatter: {
                marker: {
                    radius: 7,
                    states: {
                        hover: {
                            enabled: true,
                            lineColor: 'rgb(100,100,100)'
                        }
                    }
                },
                states: {
                    hover: {
                        marker: {
                            enabled: false
                        }
                    }
                },
                tooltip: {
                    headerFormat: '<b>{series.name}</b><br>',
                    pointFormat: '{point.y} especies | {point.x}'
                }
            }
        },
        series: [
          {% for k,v in rainfall_consumed.items %}
                {
                  name: '{{k}}',
                  data: [ [{{v.0}}, {{v.1}}],]
              },
          {% endfor %}
            ]
    });


	$('#rain').highcharts({
			 chart: {
					 type: 'column'
			 },
			 title: {
					 text: 'Precipitación promedio'
			 },
			 xAxis: {
					 type: 'category'
			 },
			 yAxis: {
					 title: {
							 text: 'Promedio'
					 }

			 },
			 legend: {
					 enabled: false
			 },
			 plotOptions: {
					 series: {
							 borderWidth: 0,
							 dataLabels: {
									 enabled: true,
									 format: '{point.y:.2f}'
							 }
					 }
			 },

			 tooltip: {
					 headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
					 pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.2f}<br/>'
			 },

			 series: [{
					 name: 'Promedio',
					 colorByPoint: true,
					 data: [
						 {% for k,v in rainfall.items %}
						 {
							 name: '{{k}}',
							 y: {{v}},
						 },
						 {% endfor %}
					 ]
			 }],
	 });

  //  temperatura ---------------------------------
   Highcharts.chart('temp', {
       chart: {
           type: 'scatter',
           zoomType: 'xy'
       },
       title: {
           text: 'Temperatura vs Especies cultivadas'
       },
       xAxis: {
           title: {
               enabled: true,
               text: 'Temperatura'
           },
           startOnTick: true,
           endOnTick: true,
           showLastLabel: true
       },
       yAxis: {
           title: {
               text: 'Especies'
           }
       },
       plotOptions: {
           scatter: {
               marker: {
                   radius: 7,
                   states: {
                       hover: {
                           enabled: true,
                           lineColor: 'rgb(100,100,100)'
                       }
                   }
               },
               states: {
                   hover: {
                       marker: {
                           enabled: false
                       }
                   }
               },
               tooltip: {
                   headerFormat: '<b>{series.name}</b><br>',
                   pointFormat: '{point.y} especies | {point.x} C°'
               }
           }
       },
       series: [
         {% for k,v in temperature.items %}
               {
                 name: '{{k}}',
                 data: [ [{{v.0}}, {{v.1}}],]
             },
         {% endfor %}
           ]
   });

   Highcharts.chart('temp_sold', {
       chart: {
           type: 'scatter',
           zoomType: 'xy'
       },
       title: {
           text: 'Temperatura vs Especies vendidas'
       },
       xAxis: {
           title: {
               enabled: true,
               text: 'Temperatura'
           },
           startOnTick: true,
           endOnTick: true,
           showLastLabel: true
       },
       yAxis: {
           title: {
               text: 'Especies'
           }
       },
       plotOptions: {
           scatter: {
               marker: {
                   radius: 7,
                   states: {
                       hover: {
                           enabled: true,
                           lineColor: 'rgb(100,100,100)'
                       }
                   }
               },
               states: {
                   hover: {
                       marker: {
                           enabled: false
                       }
                   }
               },
               tooltip: {
                   headerFormat: '<b>{series.name}</b><br>',
                   pointFormat: '{point.y} especies | {point.x} C°'
               }
           }
       },
       series: [
         {% for k,v in temperature_sold.items %}
               {
                 name: '{{k}}',
                 data: [ [{{v.0}}, {{v.1}}],]
             },
         {% endfor %}
           ]
   });

   Highcharts.chart('temp_purchased', {
       chart: {
           type: 'scatter',
           zoomType: 'xy'
       },
       title: {
           text: 'Temperatura vs Especies compradas'
       },
       xAxis: {
           title: {
               enabled: true,
               text: 'Temperatura'
           },
           startOnTick: true,
           endOnTick: true,
           showLastLabel: true
       },
       yAxis: {
           title: {
               text: 'Especies'
           }
       },
       plotOptions: {
           scatter: {
               marker: {
                   radius: 7,
                   states: {
                       hover: {
                           enabled: true,
                           lineColor: 'rgb(100,100,100)'
                       }
                   }
               },
               states: {
                   hover: {
                       marker: {
                           enabled: false
                       }
                   }
               },
               tooltip: {
                   headerFormat: '<b>{series.name}</b><br>',
                   pointFormat: '{point.y} especies | {point.x} C°'
               }
           }
       },
       series: [
         {% for k,v in temperature_purchased.items %}
               {
                 name: '{{k}}',
                 data: [ [{{v.0}}, {{v.1}}],]
             },
         {% endfor %}
           ]
   });

   Highcharts.chart('temp_consumed', {
       chart: {
           type: 'scatter',
           zoomType: 'xy'
       },
       title: {
           text: 'Temperatura vs Especies consumidas'
       },
       xAxis: {
           title: {
               enabled: true,
               text: 'Temperatura'
           },
           startOnTick: true,
           endOnTick: true,
           showLastLabel: true
       },
       yAxis: {
           title: {
               text: 'Especies'
           }
       },
       plotOptions: {
           scatter: {
               marker: {
                   radius: 7,
                   states: {
                       hover: {
                           enabled: true,
                           lineColor: 'rgb(100,100,100)'
                       }
                   }
               },
               states: {
                   hover: {
                       marker: {
                           enabled: false
                       }
                   }
               },
               tooltip: {
                   headerFormat: '<b>{series.name}</b><br>',
                   pointFormat: '{point.y} especies | {point.x} C°'
               }
           }
       },
       series: [
         {% for k,v in temperature_consumed.items %}
               {
                 name: '{{k}}',
                 data: [ [{{v.0}}, {{v.1}}],]
             },
         {% endfor %}
           ]
   });

   //  areas ---------------------------------
    Highcharts.chart('area', {
        chart: {
            type: 'scatter',
            zoomType: 'xy'
        },
        title: {
            text: 'Áreas vs Especies cultivadas'
        },
        xAxis: {
            title: {
                enabled: true,
                text: 'Área'
            },
            startOnTick: true,
            endOnTick: true,
            showLastLabel: true
        },
        yAxis: {
            title: {
                text: 'Especies'
            }
        },
        plotOptions: {
            scatter: {
                marker: {
                    radius: 7,
                    states: {
                        hover: {
                            enabled: true,
                            lineColor: 'rgb(100,100,100)'
                        }
                    }
                },
                states: {
                    hover: {
                        marker: {
                            enabled: false
                        }
                    }
                },
                tooltip: {
                    headerFormat: '<b>{series.name}</b><br>',
                    pointFormat: '{point.y} especies | {point.x} C°'
                }
            }
        },
        series: [
          {% for k,v in area.items %}
                {
                  name: '{{k}}',
                  data: [ [{{v.0}}, {{v.1}}],]
              },
          {% endfor %}
            ]
    });

    Highcharts.chart('area_sold', {
        chart: {
            type: 'scatter',
            zoomType: 'xy'
        },
        title: {
            text: 'Áreas vs Especies vendidas'
        },
        xAxis: {
            title: {
                enabled: true,
                text: 'Área'
            },
            startOnTick: true,
            endOnTick: true,
            showLastLabel: true
        },
        yAxis: {
            title: {
                text: 'Especies'
            }
        },
        plotOptions: {
            scatter: {
                marker: {
                    radius: 7,
                    states: {
                        hover: {
                            enabled: true,
                            lineColor: 'rgb(100,100,100)'
                        }
                    }
                },
                states: {
                    hover: {
                        marker: {
                            enabled: false
                        }
                    }
                },
                tooltip: {
                    headerFormat: '<b>{series.name}</b><br>',
                    pointFormat: '{point.y} especies | {point.x} C°'
                }
            }
        },
        series: [
          {% for k,v in area_sold.items %}
                {
                  name: '{{k}}',
                  data: [ [{{v.0}}, {{v.1}}],]
              },
          {% endfor %}
            ]
    });

    Highcharts.chart('area_purchased', {
        chart: {
            type: 'scatter',
            zoomType: 'xy'
        },
        title: {
            text: 'Áreas vs Especies compradas'
        },
        xAxis: {
            title: {
                enabled: true,
                text: 'Área'
            },
            startOnTick: true,
            endOnTick: true,
            showLastLabel: true
        },
        yAxis: {
            title: {
                text: 'Especies'
            }
        },
        plotOptions: {
            scatter: {
                marker: {
                    radius: 7,
                    states: {
                        hover: {
                            enabled: true,
                            lineColor: 'rgb(100,100,100)'
                        }
                    }
                },
                states: {
                    hover: {
                        marker: {
                            enabled: false
                        }
                    }
                },
                tooltip: {
                    headerFormat: '<b>{series.name}</b><br>',
                    pointFormat: '{point.y} especies | {point.x} C°'
                }
            }
        },
        series: [
          {% for k,v in area_purchased.items %}
                {
                  name: '{{k}}',
                  data: [ [{{v.0}}, {{v.1}}],]
              },
          {% endfor %}
            ]
    });

    Highcharts.chart('area_consumed', {
        chart: {
            type: 'scatter',
            zoomType: 'xy'
        },
        title: {
            text: 'Áreas vs Especies consumidas'
        },
        xAxis: {
            title: {
                enabled: true,
                text: 'Área'
            },
            startOnTick: true,
            endOnTick: true,
            showLastLabel: true
        },
        yAxis: {
            title: {
                text: 'Especies'
            }
        },
        plotOptions: {
            scatter: {
                marker: {
                    radius: 7,
                    states: {
                        hover: {
                            enabled: true,
                            lineColor: 'rgb(100,100,100)'
                        }
                    }
                },
                states: {
                    hover: {
                        marker: {
                            enabled: false
                        }
                    }
                },
                tooltip: {
                    headerFormat: '<b>{series.name}</b><br>',
                    pointFormat: '{point.y} especies | {point.x} C°'
                }
            }
        },
        series: [
          {% for k,v in area_consumed.items %}
                {
                  name: '{{k}}',
                  data: [ [{{v.0}}, {{v.1}}],]
              },
          {% endfor %}
            ]
    });

});
</script>
{% endblock %}
